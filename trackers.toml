[tracker]
# Максимально допустимое количество пропущенных кадров для трека. Большее значение удерживает трек дольше. Меньшее значение быстрее удаляет потерянные цели. Для нестабильного видео лучше увеличить. Для динамичных сцен лучше уменьшить.
max_missed_frames = 10

# Максимальное количество одновременных целей. Ограничивает нагрузку и шум. Большие значения увеличивают нагрузку на CPU. Малые значения могут приводить к потере целей. Подбирайте под мощность устройства и плотность сцены.
max_targets = 50

# Минимальный IoU для сопоставления bbox между кадрами. Больший порог делает трекер строгим. Меньший порог позволяет склеивать более отдалённые боксы. Для быстрых объектов порог обычно ниже. Для стабильных сцен можно повысить.
iou_th = 0.15

# Включает режим ведущей цели. При true оставляет трек только для направления движения. При false отображаются все найденные цели. Полезно против «шлейфа» боксов. Для отладки лучше отключать.
leading_only = true

# Минимальная скорость для учёта направления. Чем выше значение, тем меньше «ложных» направлений. Чем ниже значение, тем чувствительнее выбор направления. Для медленных объектов уменьшайте. Для быстрых потоков увеличивайте.
leading_min_speed = 2.0

# Использовать Калман для предсказания позиции.
use_kalman = true

# Шум процесса для Калмана (больше -> быстрее реагирует).
kalman_process_noise = 0.01

# Шум измерений для Калмана (больше -> сильнее сглаживание).
kalman_measurement_noise = 0.1


[manual_tracker]
# Максимальное количество одновременно отслеживаемых целей.
max_targets = 5

# Дополнительные пиксели, добавляемые к найденному ROI при клике.
click_padding = 6

# Дополнительный допуск для удаления цели при повторном клике.
remove_padding = 6

# Размер квадратного бокса, если flood fill не нашёл явный объект.
fallback_box_size = 40

# Максимально допустимая доля площади кадра для ROI (0..1).
max_area_ratio = 0.1

# Радиус поиска движущейся цели вокруг клика (пиксели).
motion_search_radius = 30

# Порог разницы яркости для поиска движения (0..255).
motion_diff_threshold = 15

# Радиус поиска статической цели вокруг клика (пиксели).
click_search_radius = 40

# Размер квадратной области вокруг клика для анализа движения (пиксели).
click_capture_size = 80

# Количество последующих кадров для анализа движения пикселей.
motion_frames = 3

# Дополнительное расширение bbox при инициализации трекера.
tracker_init_padding = 10

# Минимальный размер bbox для инициализации трекера.
tracker_min_size = 24

# Минимальная амплитуда движения (пиксели) для отбора точек.
motion_min_magnitude = 0.4

# Допуск по направлению движения (градусы).
motion_angle_tolerance_deg = 20.0

# Допуск по модулю смещения (пиксели).
motion_mag_tolerance_px = 3.0

# Минимальная доля движущихся пикселей в bbox для подтверждеия трекинга.
tracker_motion_min_ratio = 0.02

# Количество кадров, прежде чем считать bbox потерянным по малому движению.
tracker_motion_grace_frames = 3

# Время жизни bbox после потери (мс).
lost_bbox_ttl_ms = 3000

# Максимальная дистанция для fallback-пере-захвата (приоритет 3).
reacquire_fallback_max_distance_px = 1300

# Радиус ожидания (Калман) для пере-захвата по движению.
reacquire_kalman_radius_px = 120

# Радиус поиска ближайших движущихся целей после ожидания.
reacquire_near_radius_px = 200

# Выравнивать контраст в области клика перед flood fill.
click_equalize = true

# Заливать область flood fill красным с прозрачностью 0.7.
floodfill_fill_overlay = true

# Через сколько секунд убрать красную область выделенного объекта.
overlay_ttl_seconds = 3

# Допуски flood fill по яркости.
floodfill_lo_diff = 20
floodfill_hi_diff = 20

# Минимальный размер ROI для принятия.
min_area = 60
min_width = 6
min_height = 6

# Радиус поиска при попытке повторного захвата по шаблону. (было 60)
search_radius = 300

# Порог совпадения шаблона (0..1) для успешного ре-захвата.
match_threshold = 0.7

# Обновлять шаблон при успешном трекинге.
update_template = true

# Максимальное время (мс) удержания цели при пропаже.
max_lost_ms = 4000

# Автоматически переназначать цель на ближайший трек, если она потеряна.
auto_reacquire_nearest = true

# Задержка (мс) до переназначения потерянной цели.
reacquire_delay_ms = 2000

# Максимальная дистанция (пиксели) до ближайшей цели для переназначения.
reacquire_max_distance_px = 120

# Тип трекера для ручного режима: KCF, CSRT.
tracker_type = "KCF"

# Параметры фильтра Калмана.
kalman_process_noise = 0.01
kalman_measurement_noise = 0.1
